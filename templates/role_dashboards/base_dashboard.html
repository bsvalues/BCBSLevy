{% extends "base.html" %}

{% block title %}{{ role_title }}{% endblock %}

{% block page_title %}{{ role_title }}{% endblock %}
{% block page_subtitle %}{{ role_description }}{% endblock %}

{% block content %}
<div class="container-fluid mb-5">
  <div class="row">
    <!-- Sidebar Navigation -->
    <div class="col-lg-2 d-none d-lg-block">
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-header bg-dark text-white">
          <h5 class="card-title mb-0">
            <i class="bi bi-speedometer2 me-2"></i>{{ role_title }}
          </h5>
        </div>
        <div class="list-group list-group-flush">
          <a href="{{ dashboard_url }}" class="list-group-item list-group-item-action {% if active_tab == 'dashboard' %}active{% endif %}">
            <i class="bi bi-grid me-2"></i>Dashboard Overview
          </a>
          
          {% for item in sidebar_items %}
          <a href="{{ item.url }}" class="list-group-item list-group-item-action {% if active_tab == item.id %}active{% endif %}">
            <i class="bi bi-{{ item.icon }} me-2"></i>{{ item.title }}
          </a>
          {% endfor %}
        </div>
      </div>
      
      {% if show_certification_status %}
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-header {% if certification_percent >= 90 %}bg-success{% elif certification_percent >= 50 %}bg-warning text-dark{% else %}bg-danger{% endif %} text-white">
          <h5 class="card-title mb-0">
            <i class="bi bi-check2-circle me-2"></i>Certification Status
          </h5>
        </div>
        <div class="card-body">
          <div class="text-center mb-3">
            <div class="position-relative d-inline-block">
              <svg width="120" height="120" viewBox="0 0 120 120">
                <circle cx="60" cy="60" r="54" fill="none" stroke="#e9ecef" stroke-width="12" />
                <circle cx="60" cy="60" r="54" fill="none" stroke="{% if certification_percent >= 90 %}#198754{% elif certification_percent >= 50 %}#ffc107{% else %}#dc3545{% endif %}" stroke-width="12"
                  stroke-dasharray="339.5" stroke-dashoffset="{{ 339.5 - (339.5 * certification_percent / 100) }}" />
                <text x="60" y="65" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#212529">{{ certification_percent }}%</text>
              </svg>
            </div>
          </div>
          <p class="small text-center text-muted mb-0">{{ certification_status }}</p>
        </div>
      </div>
      {% endif %}
      
      {% if has_quick_actions %}
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-primary text-white">
          <h5 class="card-title mb-0">
            <i class="bi bi-lightning-charge me-2"></i>Quick Actions
          </h5>
        </div>
        <div class="card-body p-3">
          <div class="d-grid gap-2">
            {% for action in quick_actions %}
            <a href="{{ action.url }}" class="btn btn-outline-primary btn-sm text-start">
              <i class="bi bi-{{ action.icon }} me-2"></i>{{ action.title }}
            </a>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}
    </div>
    
    <!-- Main Content Area -->
    <div class="col-lg-10">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">{{ page_title|default(role_title) }}</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          {% block dashboard_actions %}{% endblock %}
        </div>
      </div>
      
      {% block dashboard_content %}{% endblock %}
    </div>
  </div>
</div>
{% endblock %}