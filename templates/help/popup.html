{% extends "base.html" %}

{% block title %}{{ explanation.title }} | Help{% endblock %}

{% block styles %}
<style>
    .help-popup {
        max-width: 600px;
        margin: 0 auto;
        padding: 2rem;
    }
    
    .help-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e9ecef;
    }
    
    .help-icon {
        background-color: #e3f2fd;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        color: #0d6efd;
    }
    
    .help-title {
        margin: 0;
        color: #212529;
    }
    
    .help-content {
        font-size: 1rem;
        line-height: 1.6;
        color: #495057;
    }
    
    .help-content p:first-child {
        font-weight: 500;
        color: #343a40;
    }
    
    .help-content code {
        background-color: #f8f9fa;
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.9rem;
    }
    
    .help-content ul, .help-content ol {
        padding-left: 1.5rem;
    }
    
    .help-footer {
        margin-top: 2rem;
        font-size: 0.875rem;
        color: #6c757d;
    }
    
    .help-category-tag {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        margin-left: 1rem;
    }
    
    .category-calculation {
        background-color: #e3f2fd;
        color: #0d6efd;
    }
    
    .category-property {
        background-color: #e9ecef;
        color: #495057;
    }
    
    .category-adjustment {
        background-color: #d1e7dd;
        color: #0f5132;
    }
    
    .category-limit {
        background-color: #fff3cd;
        color: #664d03;
    }
    
    .category-document {
        background-color: #f8f9fa;
        color: #212529;
    }
    
    .category-visualization {
        background-color: #cff4fc;
        color: #055160;
    }
    
    .category-geography {
        background-color: #f8d7da;
        color: #842029;
    }
    
    .category-other {
        background-color: #e9ecef;
        color: #495057;
    }
</style>
{% endblock %}

{% block content %}
<div class="help-popup">
    <div class="help-header">
        <div class="help-icon">
            <i class="fas 
                {% if explanation.category == 'calculation' %}fa-calculator
                {% elif explanation.category == 'property' %}fa-home
                {% elif explanation.category == 'adjustment' %}fa-sliders-h
                {% elif explanation.category == 'limit' %}fa-ban
                {% elif explanation.category == 'document' %}fa-file-alt
                {% elif explanation.category == 'visualization' %}fa-chart-bar
                {% elif explanation.category == 'geography' %}fa-map-marker-alt
                {% else %}fa-question-circle
                {% endif %}">
            </i>
        </div>
        <h2 class="help-title">
            {{ explanation.title }}
            <span class="help-category-tag category-{{ explanation.category }}">
                {{ explanation.category }}
            </span>
        </h2>
    </div>
    
    <div class="help-content">
        {{ explanation.explanation | safe }}
    </div>
    
    <div class="help-footer">
        <p>
            <small>
                <i class="fas fa-robot me-1"></i> AI-generated explanation
                <span class="ms-2 text-muted">
                    Generated: {{ explanation.generated_at.split('T')[0] if explanation.generated_at else "N/A" }}
                </span>
            </small>
        </p>
    </div>
</div>
{% endblock %}