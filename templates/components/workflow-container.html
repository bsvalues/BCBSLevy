{% macro workflow_container(title, description="", id=None, class="") %}
<div class="tf-workflow-container {{ class }}" {% if id %}id="{{ id }}"{% endif %}>
  <div class="tf-workflow-header">
    <h2 class="tf-workflow-title">{{ title }}</h2>
    {% if description %}
    <p class="tf-workflow-description">{{ description }}</p>
    {% endif %}
  </div>
  <div class="tf-workflow-content">
    {{ caller() }}
  </div>
</div>
{% endmacro %}

{% macro workflow_stepper(steps, active_step=0) %}
<div class="tf-workflow-stepper">
  {% for step in steps %}
    <div class="tf-workflow-step {% if loop.index0 < active_step %}completed{% elif loop.index0 == active_step %}active{% endif %}">
      <div class="tf-step-indicator">
        {% if loop.index0 < active_step %}
          <i class="bi bi-check"></i>
        {% else %}
          {{ loop.index }}
        {% endif %}
      </div>
      <div class="tf-step-label">{{ step.title }}</div>
      {% if step.description %}
      <div class="tf-step-description">{{ step.description }}</div>
      {% endif %}
    </div>
  {% endfor %}
</div>
{% endmacro %}

{% macro data_flow_visualization(steps, active_step=0) %}
<div class="tf-data-flow">
  {% for step in steps %}
    <div class="tf-data-flow-step {% if loop.index0 < active_step %}completed{% elif loop.index0 == active_step %}active{% endif %}">
      <div class="tf-data-flow-icon">
        <i class="bi {{ step.icon }}"></i>
      </div>
      <div class="tf-data-flow-content">
        <div class="tf-data-flow-title">{{ step.title }}</div>
        {% if step.description %}
        <div class="tf-data-flow-description">{{ step.description }}</div>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>
{% endmacro %}

{% macro task_suggestions(tasks) %}
<div class="tf-task-suggestions">
  {% for task in tasks %}
    <a href="{{ task.url }}" class="tf-task-card" {% if task.action %}data-action="{{ task.action }}"{% endif %}>
      <div class="tf-task-icon">
        <i class="bi {{ task.icon }}"></i>
      </div>
      <div class="tf-task-title">{{ task.title }}</div>
      {% if task.description %}
      <div class="tf-task-description">{{ task.description }}</div>
      {% endif %}
    </a>
  {% endfor %}
</div>
{% endmacro %}

{% macro help_context(id, title=None, content=None) %}
<span class="tf-help-context" id="{{ id }}" {% if title %}data-title="{{ title }}"{% endif %} {% if content %}data-content="{{ content }}"{% endif %}>
  <i class="bi bi-question-circle"></i>
</span>
{% endmacro %}

{% macro process_status(label, status, details=None) %}
<div class="tf-process-status-item">
  <div class="tf-process-status tf-process-status-{{ status }}">
    <span class="tf-process-status-icon bi {% if status == 'pending' %}bi-clock{% elif status == 'processing' %}bi-arrow-repeat{% elif status == 'completed' %}bi-check-circle{% elif status == 'error' %}bi-exclamation-triangle{% endif %}"></span>
    <span class="tf-process-status-label">{{ label }}</span>
  </div>
  {% if details %}
  <div class="tf-process-status-details">{{ details }}</div>
  {% endif %}
</div>
{% endmacro %}